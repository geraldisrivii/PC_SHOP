"use strict";(self.webpackChunksrc=self.webpackChunksrc||[]).push([[805],{7742:(e,o,t)=>{t.d(o,{T:()=>s});var a=t(3161);const s=async e=>await a.Z.get("pages/"+e).then((e=>e.data))},8482:(e,o,t)=>{t.d(o,{X:()=>s});var a=t(8827);const s=async e=>{let{data:o}=await a.Z.get("products",{params:e||{}});return o}},9268:(e,o,t)=>{t.d(o,{d:()=>l});var a=t(2262);class s{loadedCounter=0;counter=0;constructor(e){this.counter=e}load(){this.loadedCounter++,this.afterLoad()}restart(e){e&&(this.counter=e),this.loadedCounter=0}onAllisLoaded;afterLoad(){if(this.loadedCounter==this.counter)return this.onAllisLoaded?this.onAllisLoaded():void 0}}const l=e=>({loader:(0,a.iH)(new s(e))})},1303:(e,o,t)=>{t.d(o,{p:()=>l});var a=t(1820),s=t(6252);const l=e=>({page:(0,s.Fl)({get:()=>e.state.page.cfs,set:o=>e.commit(a.PQ.SET_PAGE_SETTINGS,o)})})},3805:(e,o,t)=>{t.r(o),t.d(o,{default:()=>ke});var a=t(6252),s=t(2262),l=t(3577),i=t(9963);const c={key:0,class:"cat-good"},n={class:"cat-good__image-box"},r=["src","alt"],u={class:"cat-good__name"},d={key:1,class:"cat__category"},g=["src","alt"],p=(0,a.aZ)({__name:"ConfiguratorCategory",props:{category:{},configureProduct:{}},emits:["update:choosenCategory"],setup(e,{emit:o}){const t=e,{category:i,configureProduct:p}=(0,s.BK)(t),_=o,v=()=>{_("update:choosenCategory",i.value)};return(e,o)=>(0,s.SU)(i)?((0,a.wg)(),(0,a.iD)("div",{onClick:v,key:(0,s.SU)(i).id,class:"cat"},[(0,s.SU)(p)[(0,s.SU)(i).slug]?((0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("div",n,[(0,s.SU)(p)[(0,s.SU)(i).slug].images?((0,a.wg)(),(0,a.iD)("img",{key:0,class:"cat-good__image",src:(0,s.SU)(p)[(0,s.SU)(i).slug].images[0].src,alt:(0,s.SU)(p)[(0,s.SU)(i).slug].name},null,8,r)):(0,a.kq)("v-if",!0)]),(0,a._)("p",u,(0,l.zw)((0,s.SU)(p)[(0,s.SU)(i).slug].name),1)])):((0,a.wg)(),(0,a.iD)("div",d,[(0,s.SU)(i).image?((0,a.wg)(),(0,a.iD)("img",{key:0,src:(0,s.SU)(i).image.src,alt:(0,s.SU)(i).image.name},null,8,g)):(0,a.kq)("v-if",!0),(0,a._)("p",null,(0,l.zw)((0,s.SU)(i).name),1)]))])):(0,a.kq)("v-if",!0)}});var _=t(3744);const v=(0,_.Z)(p,[["__scopeId","data-v-469604f9"]]),f={class:"group"},m={class:"group-panel"},w={class:"group-panel__title"},y={class:"group-categories"},S=(0,a.aZ)({__name:"MissingCategoriesGroup",props:{groupe:{},categories:{},configureProduct:{},isInfoDialogShow:{type:Boolean}},emits:["update:choosenCategory","update:isInfoDialogShow"],setup(e,{emit:o}){const t=o,{groupe:s}=e;return(e,o)=>((0,a.wg)(),(0,a.iD)("div",f,[(0,a._)("div",m,[(0,a._)("p",w,(0,l.zw)(e.groupe.label),1)]),(0,a._)("div",y,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.groupe.includes,(o=>((0,a.wg)(),(0,a.j4)(v,{onClick:a=>{var s;(s=e.categories.find((e=>e.slug===o)))&&(window.scrollTo(0,200),t("update:choosenCategory",s),t("update:isInfoDialogShow",!1))},configureProduct:e.configureProduct,category:e.categories.find((e=>e.slug===o))?e.categories.find((e=>e.slug===o)):null},null,8,["onClick","configureProduct","category"])))),256))])]))}}),h=(0,_.Z)(S,[["__scopeId","data-v-9f661f88"]]);var b=t(8827),U=t(9917),k=t(4966),C=t(1303);const P={class:"cart-button"},D=["disabled"],H=(0,a.aZ)({__name:"CartButtonEasly",props:{disabled:{type:Boolean},product:{},chosenCategory:{},configureProduct:{}},emits:["update:configureProduct"],setup(e,{emit:o}){const t=e,{configureProduct:i,product:c,disabled:n=!1,chosenCategory:r}=(0,s.BK)(t),u=o,d=(0,a.Fl)((()=>i.value[r.value.slug]?.id===c.value.id)),g=()=>{if(d.value)return u("update:configureProduct",Object.assign({},i.value,{[r.value.slug]:null}));u("update:configureProduct",Object.assign({},i.value,{[r.value.slug]:c.value}))},p=(0,k.f)(),{page:_}=(0,C.p)(p),{app:v}=(0,U.H)(p);return(e,o)=>((0,a.wg)(),(0,a.iD)("div",P,[(0,a._)("button",{disabled:(0,s.SU)(n),onClick:g,class:"button cart-button__button"},(0,l.zw)(d.value?"Убрать":"Добавить"),9,D)]))}}),Z=H;var q=t(8793);const j={class:"good-item"},I={class:"good-item__image-box"},z=["src","alt"],F={class:"good-item-content"},G={class:"good-item-content__description"},K={class:"good-item-content__title"},L={class:"good-item-content__price"},T={class:"good-item-content__quantity-box"},x=(0,a.aZ)({__name:"GoodItem",props:{product:{},configureProduct:{},chosenCategory:{}},emits:["update:configureProduct"],setup(e,{emit:o}){const t=e,{configureProduct:i,product:c,chosenCategory:n}=(0,s.BK)(t),r=o;let u=(0,k.f)();const{specDialog:d}=(0,q.K)(u),g=()=>{d.value.open(c.value)},{app:p}=(0,U.H)(u);return(e,o)=>((0,a.wg)(),(0,a.iD)("div",j,[(0,a._)("div",I,[(0,a._)("img",{class:"good-item__image",src:(0,s.SU)(c).images[0].src,alt:(0,s.SU)(c).name},null,8,z)]),(0,a._)("div",F,[(0,a._)("div",G,[(0,a._)("p",K,(0,l.zw)((0,s.SU)(c).name),1),(0,a._)("p",L,(0,l.zw)((0,s.SU)(c).price)+" руб / шт",1),(0,a._)("p",{class:"good-item-content__quantity",style:(0,l.j5)({color:(0,s.SU)(c).stock_quantity<=5?"red":"white"})},(0,l.zw)(0!==(0,s.SU)(c).stock_quantity?`В наличии: ${(0,s.SU)(c).stock_quantity} шт`:"Не осталось на складе"),5)]),(0,a._)("div",T,[(0,a.Wm)(Z,{"chosen-category":(0,s.SU)(n),disabled:(0,s.SU)(c).stock_quantity<=0,product:(0,s.SU)(c),"configure-product":(0,s.SU)(i),"onUpdate:configureProduct":o[0]||(o[0]=e=>r("update:configureProduct",e))},null,8,["chosen-category","disabled","product","configure-product"]),(0,a._)("p",{class:"good-item-content__spec-button",onClick:g},"Подробнее")])])]))}}),A=(0,_.Z)(x,[["__scopeId","data-v-15c88e43"]]);var B=t(6952),O=t(8482),Y=t(1621),E=t(3514),W=t(4768);const X=e=>((0,a.dD)("data-v-f38ee03c"),e=e(),(0,a.Cn)(),e),M={class:"first-section-wrapper"},N={class:"first-section"},V={class:"first-section-container container"},Q=X((()=>(0,a._)("h1",{class:"first-section__title title"},"Конфигуратор",-1))),$={class:"first-section-slider"},J={class:"swiper-wrapper"},R={class:"first-section-products-container"},ee={class:"first-section-goods"},oe=X((()=>(0,a._)("div",{class:"first-section-filters"},[(0,a.kq)(" <CustomSelect\n                        \n                        /> ")],-1))),te={class:"first-section-total-box"},ae={class:"first-section-total-panel"},se={key:0,class:"first-section-total-panel__button"},le={class:"first-section-total-panel__right"},ie={class:"first-section-total-panel__price"},ce=["disabled"],ne={class:"info-dialog-wrapper"},re={class:"info-dialog"},ue=X((()=>(0,a._)("p",{class:"info-dialog__title title"},"Недостающие категории",-1))),de=X((()=>(0,a._)("p",{class:"info-dialog__text"},"Вам нужно добавить хотя бы один из элементов в категории указанных в недостающей группе категорий",-1))),ge={class:"info-dialog-categories"},pe=["onSubmit"],_e=X((()=>(0,a._)("p",{class:"name-dialog-form__title title"},"Имя конфигурации",-1))),ve={class:"name-dialog-form__inputs"},fe=["disabled"],me=(0,a.aZ)({__name:"first-section",props:{product:{}},setup(e){const{product:o}=e,{swiperContainer:t,initializeSwiper:c}=(0,B.o)(),{ConfigureProduct:n,isAllGroupsFilled:r,missingGroups:u,totalPrice:d}=(()=>{const e=(0,s.iH)({cpu:null,gpu:null,ram:null,motherboard:null,ssd:null,hdd:null,case:null,pb:null,pc_fan:null,cpu_cooler:null}),o=[{label:"Процессор",includes:["cpu"]},{label:"Видеокарта",includes:["gpu"]},{label:"Материнская плата",includes:["motherboard"]},{label:"Оперативная память",includes:["ram"]},{label:"Корпус",includes:["case"]},{label:"Кулер",includes:["cpu_cooler"]},{label:"Корпусные вентиляторы",includes:["pc_fan"]},{label:"Диски",includes:["ssd","hdd"]},{label:"Блоки питания",includes:["pb"]}],t=(0,a.Fl)((()=>o.filter((o=>!o.includes.some((o=>null!==e.value[o])))))),l=(0,a.Fl)((()=>0===t.value.length)),i=(0,a.Fl)((()=>{let o=0;return Object.values(e.value).filter((e=>e)).forEach((e=>{o+=Number(e.price)})),o}));return{ConfigureProduct:e,missingGroups:t,isAllGroupsFilled:l,totalPrice:i}})(),{categories:g,choosenCategory:p}={categories:(0,s.iH)([]),choosenCategory:(0,s.iH)(null)},_=(0,a.Fl)((()=>{const e=Object.values(n.value).filter((e=>e)).map((e=>e.cfs.filters)).flat();return e.filter((e=>e.link[0].slug==p.value.slug))}));(0,a.YP)(_,(()=>{console.log(_.value)}));const{products:f,isProductsLoaded:m}=((e,o)=>{const t=(0,s.iH)([]),l=(0,s.iH)(!1),i=(0,a.Fl)((()=>{let e=[];return o.value.forEach((o=>{e.push({name:o.key[0].slug,value:o.value,type:Object.keys(o.type)[0],kind:Object.keys(o.kind)[0]})})),e}));return(0,a.YP)(e,(async()=>{e&&(l.value=!1,t.value=await(0,O.X)({category:e.value.id,filters:i.value}),l.value=!0)}),{deep:!0}),{products:t,isProductsLoaded:l}})(p,_),w=(0,s.iH)(null);(0,a.YP)(m,(()=>{if(!m.value)return console.log(m.value),w.value.open();setTimeout((()=>w.value.close()),200)}));const y=(0,s.iH)(!1),S=()=>{r.value||(y.value=!0)},U=(0,k.f)(),{basketItems:C}=(0,E.s)(U),{addToCart:P}=(0,Y.U)(C),D=async()=>{const e={name:H.value,items:Object.values(n.value).filter((e=>e)).map((e=>e.id))};e.imageID=n.value.case.images[0].id;const o=await b.Z.post("products/customs",e);console.log(o),201===o.status&&(H.value="",Z.value=!1,P(o.data))},H=(0,s.iH)(""),Z=(0,s.iH)(!1),q=()=>{Z.value=!0};return(0,a.bv)((async()=>{g.value=await(async e=>(await b.Z.get("/products/categories",{params:{per_page:100,parent:19,order:"desc"}})).data)(),p.value=g.value[0],(()=>{if(o){for(const e in n.value)n.value[e]=o.grouped_products.find((o=>o.categories.find((o=>o.slug===e))));console.log(n.value)}})(),c({slidesPerView:"auto",spaceBetween:30})})),(e,o)=>{const c=(0,a.up)("my-dialog");return(0,a.wg)(),(0,a.iD)("div",M,[(0,a._)("div",N,[(0,a._)("div",V,[Q,(0,a._)("div",$,[(0,a._)("div",{ref_key:"swiperContainer",ref:t,class:"swiper-container"},[(0,a._)("div",J,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(g),(e=>((0,a.wg)(),(0,a.j4)(v,{class:"swiper-slide",key:e.id,category:e,"configure-product":(0,s.SU)(n),"choosen-category":(0,s.SU)(p),"onUpdate:choosenCategory":o[0]||(o[0]=e=>(0,s.dq)(p)?p.value=e:null)},null,8,["category","configure-product","choosen-category"])))),128))])],512)]),(0,a._)("div",R,[(0,a._)("div",ee,[(0,a.Wm)(W.Z,{ref_key:"preloader",ref:w},null,512),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(f),(e=>((0,a.wg)(),(0,a.j4)(A,{key:e.id,"chosen-category":(0,s.SU)(p),"configure-product":(0,s.SU)(n),"onUpdate:configureProduct":o[1]||(o[1]=e=>(0,s.dq)(n)?n.value=e:null),product:e},null,8,["chosen-category","configure-product","product"])))),128))]),oe]),(0,a._)("div",te,[(0,a._)("div",ae,[(0,a._)("div",{onClick:S,class:"first-section-total-panel__left"},[(0,a._)("p",{class:"first-section-total-panel__text",style:(0,l.j5)({color:(0,s.SU)(r)?"green":"red"})},(0,l.zw)((0,s.SU)(r)?"Все отлично!":"Не достает обязательных компонентов"),5),(0,s.SU)(r)?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)("button",se,"?"))]),(0,a._)("div",le,[(0,a._)("p",ie," Итого: "+(0,l.zw)((0,s.SU)(d))+" ₽ ",1),(0,a._)("button",{onClick:q,disabled:!(0,s.SU)(r),class:"button"}," Добавить в корзину ",8,ce)])])]),(0,a.Wm)(c,{isDialogShow:y.value,"onUpdate:isDialogShow":o[4]||(o[4]=e=>y.value=e)},{default:(0,a.w5)((()=>[(0,a._)("div",ne,[(0,a._)("div",re,[ue,de,(0,a._)("div",ge,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(u),((e,t)=>((0,a.wg)(),(0,a.j4)(h,{key:t,groupe:e,categories:(0,s.SU)(g),configureProduct:(0,s.SU)(n),"choosen-category":(0,s.SU)(p),"onUpdate:choosenCategory":o[2]||(o[2]=e=>(0,s.dq)(p)?p.value=e:null),"is-info-dialog-show":y.value,"onUpdate:isInfoDialogShow":o[3]||(o[3]=e=>y.value=e)},null,8,["groupe","categories","configureProduct","choosen-category","is-info-dialog-show"])))),128))])])])])),_:1},8,["isDialogShow"]),(0,a.Wm)(c,{isDialogShow:Z.value,"onUpdate:isDialogShow":o[6]||(o[6]=e=>Z.value=e)},{default:(0,a.w5)((()=>[(0,a._)("form",{onSubmit:(0,i.iM)(D,["prevent"]),class:"name-dialog-form"},[_e,(0,a._)("div",ve,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":o[5]||(o[5]=e=>H.value=e),type:"text",class:"name-dialog-form__input input",placeholder:"Название"},null,512),[[i.nr,H.value]]),(0,a._)("button",{disabled:!H.value,class:"button"},"Сохранить",8,fe)])],40,pe)])),_:1},8,["isDialogShow"])])])])}}}),we=(0,_.Z)(me,[["__scopeId","data-v-f38ee03c"]]);var ye=t(7742),Se=t(9268),he=t(1820),be=t(2201);const Ue={key:0},ke=(0,a.aZ)({__name:"configurator",setup(e){const o=(0,s.iH)(!1);let{loader:t}=(0,Se.d)(2);t.value.onAllisLoaded=()=>{preloaderClose(),t.value.restart()};const l=(0,s.iH)(null),{page:i}=(0,C.p)(he.ZP),c=(0,be.yj)();return(0,a.bv)((async()=>{i.value=await(0,ye.T)(331),await(async()=>{"new"!=c.params.product&&(l.value=(await(0,O.X)({slug:c.params.product}))[0])})(),o.value=!0,preloaderClose()})),(e,t)=>o.value?((0,a.wg)(),(0,a.iD)("main",Ue,[(0,a.Wm)(we,{product:l.value},null,8,["product"])])):(0,a.kq)("v-if",!0)}})}}]);