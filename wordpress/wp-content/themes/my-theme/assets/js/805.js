"use strict";(self.webpackChunksrc=self.webpackChunksrc||[]).push([[805],{7742:(e,o,t)=>{t.d(o,{T:()=>s});var a=t(3161);const s=async e=>await a.Z.get("pages/"+e).then((e=>e.data))},8482:(e,o,t)=>{t.d(o,{X:()=>s});var a=t(8827);const s=async e=>{let{data:o}=await a.Z.get("products",{params:e||{}});return o}},9268:(e,o,t)=>{t.d(o,{d:()=>l});var a=t(2262);class s{loadedCounter=0;counter=0;constructor(e){this.counter=e}load(){this.loadedCounter++,this.afterLoad()}restart(e){e&&(this.counter=e),this.loadedCounter=0}onAllisLoaded;afterLoad(){if(this.loadedCounter==this.counter)return this.onAllisLoaded?this.onAllisLoaded():void 0}}const l=e=>({loader:(0,a.iH)(new s(e))})},1303:(e,o,t)=>{t.d(o,{p:()=>l});var a=t(1820),s=t(6252);const l=e=>({page:(0,s.Fl)({get:()=>e.state.page.cfs,set:o=>e.commit(a.PQ.SET_PAGE_SETTINGS,o)})})},3805:(e,o,t)=>{t.r(o),t.d(o,{default:()=>Ue});var a=t(6252),s=t(2262),l=t(3577),i=t(9963);const c={key:0,class:"cat-good"},n={class:"cat-good__image-box"},r=["src","alt"],u={class:"cat-good__name"},d={key:1,class:"cat__category"},g=["src","alt"],p=(0,a.aZ)({__name:"ConfiguratorCategory",props:{category:{},configureProduct:{}},emits:["update:choosenCategory"],setup(e,{emit:o}){const t=e,{category:i,configureProduct:p}=(0,s.BK)(t),_=o,v=()=>{_("update:choosenCategory",i.value)};return(e,o)=>(0,s.SU)(i)?((0,a.wg)(),(0,a.iD)("div",{onClick:v,key:(0,s.SU)(i).id,class:"cat"},[(0,s.SU)(p)[(0,s.SU)(i).slug]?((0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("div",n,[(0,s.SU)(p)[(0,s.SU)(i).slug].images?((0,a.wg)(),(0,a.iD)("img",{key:0,class:"cat-good__image",src:(0,s.SU)(p)[(0,s.SU)(i).slug].images[0].src,alt:(0,s.SU)(p)[(0,s.SU)(i).slug].name},null,8,r)):(0,a.kq)("v-if",!0)]),(0,a._)("p",u,(0,l.zw)((0,s.SU)(p)[(0,s.SU)(i).slug].name),1)])):((0,a.wg)(),(0,a.iD)("div",d,[(0,s.SU)(i).image?((0,a.wg)(),(0,a.iD)("img",{key:0,src:(0,s.SU)(i).image.src,alt:(0,s.SU)(i).image.name},null,8,g)):(0,a.kq)("v-if",!0),(0,a._)("p",null,(0,l.zw)((0,s.SU)(i).name),1)]))])):(0,a.kq)("v-if",!0)}});var _=t(3744);const v=(0,_.Z)(p,[["__scopeId","data-v-e9199be4"]]),f={class:"group"},m={class:"group-panel"},w={class:"group-panel__title"},y={class:"group-categories"},b=(0,a.aZ)({__name:"MissingCategoriesGroup",props:{groupe:{},categories:{},configureProduct:{},isInfoDialogShow:{type:Boolean}},emits:["update:choosenCategory","update:isInfoDialogShow"],setup(e,{emit:o}){const t=o,{groupe:s}=e;return(e,o)=>((0,a.wg)(),(0,a.iD)("div",f,[(0,a._)("div",m,[(0,a._)("p",w,(0,l.zw)(e.groupe.label),1)]),(0,a._)("div",y,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.groupe.includes,(o=>((0,a.wg)(),(0,a.j4)(v,{onClick:a=>{var s;(s=e.categories.find((e=>e.slug===o)))&&(window.scrollTo(0,200),t("update:choosenCategory",s),t("update:isInfoDialogShow",!1))},configureProduct:e.configureProduct,category:e.categories.find((e=>e.slug===o))?e.categories.find((e=>e.slug===o)):null},null,8,["onClick","configureProduct","category"])))),256))])]))}}),S=(0,_.Z)(b,[["__scopeId","data-v-3e4af0c8"]]);var h=t(8827),U=t(9917),k=t(4966),C=t(1303);const P={class:"cart-button"},D=["disabled"],H=(0,a.aZ)({__name:"CartButtonEasly",props:{disabled:{type:Boolean},product:{},chosenCategory:{},configureProduct:{}},emits:["update:configureProduct"],setup(e,{emit:o}){const t=e,{configureProduct:i,product:c,disabled:n=!1,chosenCategory:r}=(0,s.BK)(t),u=o,d=(0,a.Fl)((()=>i.value[r.value.slug]?.id===c.value.id)),g=()=>{if(d.value)return u("update:configureProduct",Object.assign({},i.value,{[r.value.slug]:null}));u("update:configureProduct",Object.assign({},i.value,{[r.value.slug]:c.value}))},p=(0,k.f)(),{page:_}=(0,C.p)(p),{app:v}=(0,U.H)(p);return(e,o)=>((0,a.wg)(),(0,a.iD)("div",P,[(0,a._)("button",{disabled:(0,s.SU)(n),onClick:g,class:"button cart-button__button"},(0,l.zw)(d.value?"Убрать":"Добавить"),9,D)]))}}),q=H;var Z=t(8793);const j={class:"good-item"},I={class:"good-item__image-box"},z=["src","alt"],F={class:"good-item-content"},G={class:"good-item-content__description"},K={class:"good-item-content__title"},x={class:"good-item-content__price"},A={class:"good-item-content__quantity-box"},B=(0,a.aZ)({__name:"GoodItem",props:{product:{},configureProduct:{},chosenCategory:{}},emits:["update:configureProduct"],setup(e,{emit:o}){const t=e,{configureProduct:i,product:c,chosenCategory:n}=(0,s.BK)(t),r=o;let u=(0,k.f)();const{specDialog:d}=(0,Z.K)(u),g=()=>{d.value.open(c.value)},{app:p}=(0,U.H)(u);return(e,o)=>((0,a.wg)(),(0,a.iD)("div",j,[(0,a._)("div",I,[(0,a._)("img",{class:"good-item__image",src:(0,s.SU)(c).images[0].src,alt:(0,s.SU)(c).name},null,8,z)]),(0,a._)("div",F,[(0,a._)("div",G,[(0,a._)("p",K,(0,l.zw)((0,s.SU)(c).name),1),(0,a._)("p",x,(0,l.zw)((0,s.SU)(c).price)+" руб / шт",1),(0,a._)("p",{class:"good-item-content__quantity",style:(0,l.j5)({color:(0,s.SU)(c).stock_quantity<=5?"red":"white"})},(0,l.zw)(0!==(0,s.SU)(c).stock_quantity?`В наличии: ${(0,s.SU)(c).stock_quantity} шт`:"Не осталось на складе"),5)]),(0,a._)("div",A,[(0,a.Wm)(q,{"chosen-category":(0,s.SU)(n),disabled:(0,s.SU)(c).stock_quantity<=0,product:(0,s.SU)(c),"configure-product":(0,s.SU)(i),"onUpdate:configureProduct":o[0]||(o[0]=e=>r("update:configureProduct",e))},null,8,["chosen-category","disabled","product","configure-product"]),(0,a._)("p",{class:"good-item-content__spec-button",onClick:g},"Подробнее")])])]))}}),O=(0,_.Z)(B,[["__scopeId","data-v-2b4bb840"]]);var T=t(6952),E=t(8482),L=t(1621),Y=t(3514);const W=e=>((0,a.dD)("data-v-c0f1db02"),e=e(),(0,a.Cn)(),e),N={class:"first-section-wrapper"},X={class:"first-section"},M={class:"first-section-container container"},V=W((()=>(0,a._)("h1",{class:"first-section__title title"},"Конфигуратор",-1))),Q={class:"first-section-slider"},$={class:"swiper-wrapper"},J={class:"first-section-products-container"},R={class:"first-section-goods"},ee=W((()=>(0,a._)("div",{class:"first-section-filters"},[(0,a.kq)(" <CustomSelect\n                        \n                        /> ")],-1))),oe={class:"first-section-total-box"},te={class:"first-section-total-panel"},ae={key:0,class:"first-section-total-panel__button"},se={class:"first-section-total-panel__right"},le={class:"first-section-total-panel__price"},ie=["disabled"],ce={class:"info-dialog-wrapper"},ne={class:"info-dialog"},re=W((()=>(0,a._)("p",{class:"info-dialog__title title"},"Недостающие категории",-1))),ue=W((()=>(0,a._)("p",{class:"info-dialog__text"},"Вам нужно добавить хотя бы один из элементов в категории указанных в недостающей группе категорий",-1))),de={class:"info-dialog-categories"},ge=["onSubmit"],pe=W((()=>(0,a._)("p",{class:"name-dialog-form__title title"},"Имя конфигурации",-1))),_e={class:"name-dialog-form__inputs"},ve=["disabled"],fe=(0,a.aZ)({__name:"first-section",props:{product:{}},setup(e){const{product:o}=e,{swiperContainer:t,initializeSwiper:c}=(0,T.o)(),{ConfigureProduct:n,isAllGroupsFilled:r,missingGroups:u,totalPrice:d}=(()=>{const e=(0,s.iH)({cpu:null,gpu:null,ram:null,motherboard:null,ssd:null,hdd:null,case:null,pb:null,pc_fan:null,cpu_cooler:null}),o=[{label:"Процессор",includes:["cpu"]},{label:"Видеокарта",includes:["gpu"]},{label:"Материнская плата",includes:["motherboard"]},{label:"Оперативная память",includes:["ram"]},{label:"Корпус",includes:["case"]},{label:"Кулер",includes:["cpu_cooler"]},{label:"Корпусные вентиляторы",includes:["pc_fan"]},{label:"Диски",includes:["ssd","hdd"]},{label:"Блоки питания",includes:["pb"]}],t=(0,a.Fl)((()=>o.filter((o=>!o.includes.some((o=>null!==e.value[o])))))),l=(0,a.Fl)((()=>0===t.value.length)),i=(0,a.Fl)((()=>{let o=0;return Object.values(e.value).filter((e=>e)).forEach((e=>{o+=Number(e.price)})),o}));return{ConfigureProduct:e,missingGroups:t,isAllGroupsFilled:l,totalPrice:i}})(),{categories:g,choosenCategory:p}={categories:(0,s.iH)([]),choosenCategory:(0,s.iH)(null)},_=(0,a.Fl)((()=>{const e=Object.values(n.value).filter((e=>e)).map((e=>e.cfs.filters)).flat();return e.filter((e=>e.link[0].slug==p.value.slug))}));(0,a.YP)(_,(()=>{console.log(_.value)}));const{products:f}=((e,o)=>{const t=(0,s.iH)([]),l=(0,a.Fl)((()=>{let e=[];return o.value.forEach((o=>{e.push({name:o.key[0].slug,value:o.value,type:Object.keys(o.type)[0],kind:Object.keys(o.kind)[0]})})),e}));return(0,a.YP)(e,(async()=>{e&&(t.value=await(0,E.X)({category:e.value.id,filters:l.value}))}),{deep:!0}),{products:t}})(p,_),m=(0,s.iH)(!1),w=()=>{r.value||(m.value=!0)},y=(0,k.f)(),{basketItems:b}=(0,Y.s)(y),{addToCart:U}=(0,L.U)(b),C=async()=>{const e={name:P.value,items:Object.values(n.value).filter((e=>e)).map((e=>e.id))};console.log(n.value.case.images[0].name),e.imageID=Number(n.value.case.images[0].name);const o=await h.Z.post("products/customs",e);console.log(o),201===o.status&&(P.value="",D.value=!1,U(o.data))},P=(0,s.iH)(""),D=(0,s.iH)(!1),H=()=>{D.value=!0};return(0,a.bv)((async()=>{g.value=await(async e=>(await h.Z.get("/products/categories",{params:{per_page:100,parent:19,order:"desc"}})).data)(),p.value=g.value[0],(()=>{if(o){for(const e in n.value)n.value[e]=o.grouped_products.find((o=>o.categories.find((o=>o.slug===e))));console.log(n.value)}})(),c({slidesPerView:4.5,spaceBetween:30})})),(e,o)=>{const c=(0,a.up)("my-dialog");return(0,a.wg)(),(0,a.iD)("div",N,[(0,a._)("div",X,[(0,a._)("div",M,[V,(0,a._)("div",Q,[(0,a._)("div",{ref_key:"swiperContainer",ref:t,class:"swiper-container"},[(0,a._)("div",$,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(g),(e=>((0,a.wg)(),(0,a.j4)(v,{class:"swiper-slide",key:e.id,category:e,"configure-product":(0,s.SU)(n),"choosen-category":(0,s.SU)(p),"onUpdate:choosenCategory":o[0]||(o[0]=e=>(0,s.dq)(p)?p.value=e:null)},null,8,["category","configure-product","choosen-category"])))),128))])],512)]),(0,a._)("div",J,[(0,a._)("div",R,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(f),(e=>((0,a.wg)(),(0,a.j4)(O,{key:e.id,"chosen-category":(0,s.SU)(p),"configure-product":(0,s.SU)(n),"onUpdate:configureProduct":o[1]||(o[1]=e=>(0,s.dq)(n)?n.value=e:null),product:e},null,8,["chosen-category","configure-product","product"])))),128))]),ee]),(0,a._)("div",oe,[(0,a._)("div",te,[(0,a._)("div",{onClick:w,class:"first-section-total-panel__left"},[(0,a._)("p",{class:"first-section-total-panel__text",style:(0,l.j5)({color:(0,s.SU)(r)?"green":"red"})},(0,l.zw)((0,s.SU)(r)?"Все отлично!":"Не достает обязательных компонентов"),5),(0,s.SU)(r)?(0,a.kq)("v-if",!0):((0,a.wg)(),(0,a.iD)("button",ae,"?"))]),(0,a._)("div",se,[(0,a._)("p",le," Итого: "+(0,l.zw)((0,s.SU)(d))+" ₽ ",1),(0,a._)("button",{onClick:H,disabled:!(0,s.SU)(r),class:"button"}," Добавить в корзину ",8,ie)])])]),(0,a.Wm)(c,{isDialogShow:m.value,"onUpdate:isDialogShow":o[4]||(o[4]=e=>m.value=e)},{default:(0,a.w5)((()=>[(0,a._)("div",ce,[(0,a._)("div",ne,[re,ue,(0,a._)("div",de,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(u),((e,t)=>((0,a.wg)(),(0,a.j4)(S,{key:t,groupe:e,categories:(0,s.SU)(g),configureProduct:(0,s.SU)(n),"choosen-category":(0,s.SU)(p),"onUpdate:choosenCategory":o[2]||(o[2]=e=>(0,s.dq)(p)?p.value=e:null),"is-info-dialog-show":m.value,"onUpdate:isInfoDialogShow":o[3]||(o[3]=e=>m.value=e)},null,8,["groupe","categories","configureProduct","choosen-category","is-info-dialog-show"])))),128))])])])])),_:1},8,["isDialogShow"]),(0,a.Wm)(c,{isDialogShow:D.value,"onUpdate:isDialogShow":o[6]||(o[6]=e=>D.value=e)},{default:(0,a.w5)((()=>[(0,a._)("form",{onSubmit:(0,i.iM)(C,["prevent"]),class:"name-dialog-form"},[pe,(0,a._)("div",_e,[(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":o[5]||(o[5]=e=>P.value=e),type:"text",class:"name-dialog-form__input input",placeholder:"Название"},null,512),[[i.nr,P.value]]),(0,a._)("button",{disabled:!P.value,class:"button"},"Сохранить",8,ve)])],40,ge)])),_:1},8,["isDialogShow"])])])])}}}),me=(0,_.Z)(fe,[["__scopeId","data-v-c0f1db02"]]);var we=t(7742),ye=t(9268),be=t(1820),Se=t(2201);const he={key:0},Ue=(0,a.aZ)({__name:"configurator",setup(e){const o=(0,s.iH)(!1);let{loader:t}=(0,ye.d)(2);t.value.onAllisLoaded=()=>{preloaderClose(),t.value.restart()};const l=(0,s.iH)(null),{page:i}=(0,C.p)(be.ZP),c=(0,Se.yj)();return(0,a.bv)((async()=>{i.value=await(0,we.T)(331),await(async()=>{"new"!=c.params.product&&(l.value=(await(0,E.X)({slug:c.params.product}))[0])})(),o.value=!0,preloaderClose()})),(e,t)=>o.value?((0,a.wg)(),(0,a.iD)("main",he,[(0,a.Wm)(me,{product:l.value},null,8,["product"])])):(0,a.kq)("v-if",!0)}})}}]);